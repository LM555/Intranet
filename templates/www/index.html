{% extends "www/base.html" %}
{% load www %}

{% block extrahead %}
<link href='{{ media_url }}/www/scroll.css' type='text/css' rel='stylesheet' />
<script type='text/javascript' src='{{ media_url }}/js/jquery.scrollTo-min.js'></script>
<script type='text/javascript' src='{{ media_url }}/js/jquery.serialScroll-min.js'></script>
<script type='text/javascript'>
<!-- TODO create init.js -->

jQuery.easing.easeOutQuart = function (x, t, b, c, d) {
	return -c * ((t=t/d-1)*t*t*t - 1) + b;
};

jQuery(function( $ ){
	$('#screen').serialScroll({
		target:'#sections',
		items:'li', // Selector to the items ( relative to the matched elements, '#sections' in this case )
		prev:'img.prev',// Selector to the 'prev' button (absolute!, meaning it's relative to the document)
		next:'img.next',// Selector to the 'next' button (absolute too)
		navigation:'#navigation li a',
		duration:700,// Length of the animation (if you scroll 2 axes and use queue, then each axis take half this time)
		force:true, // Force a scroll to the element specified by 'start' (some browsers don't reset on refreshes)
		interval:1987, // It's the number of milliseconds to automatically go to the next
		
		onBefore:function( e, elem, $pane, $items, pos ){
			e.preventDefault();
			if( this.blur )
				this.blur();
		}
	});
	$('#sections').hover(function(){
		$('#sections').trigger('stop');
		},function(){
		$('#sections').trigger('start');
	});
    {% for i in ticker %}
        $('#stop{{ forloop.counter }}').click(function(){
            $('#sections').trigger('stop');
        });
        $('#stop{{ forloop.counter }}').mouseout(function(){
            $('#sections').trigger('start');
        });
    {% endfor %}
    });
    $(document).ready(function() {
        i = 101;
        events = new Array({{ jsevents|safe }});
        function redraw(){
            $(".present-now").html(events[i-1]);
            $(".present-now2").html(events[i]);
            $(".present-now3").html(events[i+1]);
        }
        $(".future").click(function(){
            i++;
            redraw();
        });
        $(".past").click(function(){
            i--;
            redraw();
        });
        $(".past3").click(function(){
            i-=3;
            redraw();
        });
        $(".future3").click(function(){
            i+=3;
            redraw();
        });
    });
</script>
{% endblock %}
{% block content %}
    <div id="upcoming">
    	<div class="next3">
        	<div class="past"><a href="#" onclick="return false;"><img src="{{ media_url }}www/images/puscica-levo.gif" alt="slika" /></a></div>
        	<div class="past3"><a href="#" onclick="return false;">&lt; &lt;</a></div>
            <div class="present">
            	<div class="present-now">
                	<img width="274" height="200" src="{{ media_url }}www/images/img-upcoming.gif" alt="slika" />
                    <div class="present-event-text"><a href="{{ events.0.get_public_url }}">{{ events.0 }}</a></div>
                </div>
                <div class="present-now2">
                	<img width="274" height="200" src="{{ media_url }}www/images/img-upcoming.gif" alt="slika" />
                    <div class="present-event-text"><a href="{{ events.1.get_public_url }}">{{ events.1 }}</a></div>
                </div>
                <div class="present-now3">
                	<img width="274" height="200" src="{{ media_url }}www/images/img-upcoming.gif" alt="slika" />
                    <div class="present-event-text"><a href="{{ events.2.get_public_url }}">{{ events.2 }}</a></div>
                </div>
             </div>
             <div class="future"><a href="#" onclick="return false;"><img src="{{ media_url }}www/images/puscica-desno.gif" alt="slika" /></a></div>
             <div class="future3"><a href="#" onclick="return false;">&gt; &gt;</a></div>
         </div>
      </div>
    
    <div id="notifier">
    	<div class="button-chamber">
        	<div class="gallery"><a href="/gallery/">gallery</a></div>
            <div class="gallery-button">
            	<img src="{{ media_url }}www/images/picture-small.gif" alt="slika" />
            </div>
            <div class="gallery-button2">
            	<img src="{{ media_url }}www/images/picture-small.gif" alt="slika" />
            </div>
            <div class="gallery-button3">
            	<img src="{{ media_url }}www/images/picture-small.gif" alt="slika" />
            </div>
            <div class="video">video arhiv</div>
            <div class="video-button">
            	<img src="{{ media_url }}www/images/video-small.gif" alt="slika" />
            </div>
            <div class="video-button2">
            	<img src="{{ media_url }}www/images/video-small.gif" alt="slika" />
            </div>
            <div class="video-button3">
            	<img src="{{ media_url }}www/images/video-small.gif" alt="slika" />
            </div>
         </div>
       <div id="screen" class="notifier-chamber">
         <div id="navigation">
            <ul>
                {% for i in ticker %}
                    <li><a id="stop{{ forloop.counter }}" href="#">{{ i.name }}</a></li>
                {% endfor %}
            </ul>
         </div>
         <div id="sections">
            <ul>
                {% for i in ticker %}
                    <li>
                        <h2>{{ i.name }}</h2>
                        <p>{{ i.note }}</p>
                    </li>
                {% endfor %}
            </ul>
         </div>
       </div>
    </div>
    
    <div id="second-nav">
    <a href="http://muzej.kiberpipa.org/">muzej</a> | g404 | <a href="http://www.kiberpipa.org/err0r/">err0r</a> | <a href="http://www.kiberpipa.org/postlab/">postlab</a> | <a href="http://www.kiberpipa.org/haip">haip</a> | film≈°teka | <a href="http://pot.kiberpipa.org/">POT</a> | <a href="http://web.zen.si/">SU</a> | VIP | NET
    </div>
    
    <div id="blog-cp">
    	<div class="blog-cp-title">
        Kiberpipin blog
        </div>
        {% for i in news %}
            <div class="blog-cp-news-title">
            <a href="{{ i.get_absolute_url }}">{{ i.title }}</a>
            </div>
            <div class="blog-cp-publish">
            Published by John Doe on {{ i.date }}
            </div>
            <div class="blog-cp-content">
            {{ i.text|santize|truncatewords:"40" }}
            </div>
            <div class="blog-cp-more">
            more &gt;&gt;
            </div>
        {% endfor %}
    </div>
    
    <div id="planet">
    	<div class="planet-title">
        Planet
        </div>
        {% for post in planet %}
            <div class="planet-news-title">
            <a href="{{ post.link }}">{{ post.title }}</a>
            </div>
            <div class="planet-publish">
            Published by {{ post.author }} on {{ post.date_modified }}
            </div>
            <div class="planet-content">
            {{ post.content|santize|truncatewords:"40" }}
            </div>
            <div class="planet-more">
            more &gt;&gt;
            </div>
        {% endfor %}
    </div>
{% endblock %}
