{% extends "www/base.html" %}

{% block extrahead %}
<link href='{{ media_url }}/www/scroll.css' type='text/css' rel='stylesheet' />
<script type='text/javascript' src='{{ media_url }}/js/jquery.scrollTo-min.js'></script>
<script type='text/javascript' src='{{ media_url }}/js/jquery.serialScroll-min.js'></script>
<script type='text/javascript'>
jQuery.easing.easeOutQuart = function (x, t, b, c, d) {
	return -c * ((t=t/d-1)*t*t*t - 1) + b;
};

jQuery(function( $ ){
	$('#screen').serialScroll({
		target:'#sections',
		items:'li', // Selector to the items ( relative to the matched elements, '#sections' in this case )
		prev:'img.prev',// Selector to the 'prev' button (absolute!, meaning it's relative to the document)
		next:'img.next',// Selector to the 'next' button (absolute too)
		navigation:'#navigation li a',
		duration:700,// Length of the animation (if you scroll 2 axes and use queue, then each axis take half this time)
		force:true, // Force a scroll to the element specified by 'start' (some browsers don't reset on refreshes)
		interval:1987, // It's the number of milliseconds to automatically go to the next
		
		onBefore:function( e, elem, $pane, $items, pos ){
			e.preventDefault();
			if( this.blur )
				this.blur();
		}
	});
	$('#sections').hover(function(){
		$('#sections').trigger('stop');
		},function(){
		$('#sections').trigger('start');
	});
    {% for i in news %}
        $('#stop{{ forloop.counter }}').click(function(){
            $('#sections').trigger('stop');
        });
        $('#stop{{ forloop.counter }}').mouseout(function(){
            $('#sections').trigger('start');
        });
    {% endfor %}
    });
    i = 0;
    $(document).ready(function() {
        next = new Array({{ next|safe }});
        prev = new Array({{ prev|safe }});

        $("#next_one").click(function(){
            i++;
            $("#one").html($("#two").html());
            $("#two").html($("#three").html());
            $("#three").html(next[0]);
            next.shift();
            $.ajax({
                url: "http://rtv:8000/event/next/"+i+"/5/1/", 
                success: function(html){
                    next.push(html);
                }
            
             });
        });

        $("#prev_one").click(function(){
            i--;
            $("#three").html($("#two").html());
            $("#two").html($("#one").html());
            $("#one").html(prev[0]);
            prev.shift();
            $.ajax({
                url: "http://rtv:8000/event/next/"+i+"/-3/1/", 
                success: function(html){
                    prev.push(html);
                }
            
             });
        });
        
    });
</script>
{% endblock %}
{% block content %}
<!-- BEGIN timeline ajax testing (RD666) -->
<<< <a href="#" id="prev_one"><</a>
<table width="960"><tr>
    <td id="one">{{ events.0 }}</td>
    <td id="two">{{ events.1 }}</td>
    <td id="three">{{ events.2 }}</td>
</tr></table>
<a href="#" id="next_one">></a>  >>>
<!-- END timeline testing -->
		<div id="threeboxes">
			<div class="box mr20">
				{% if events.0 %}<a href="/event/{{ events.0.title|slugify }}">{{ events.0 }}</a>
                {% else %}
                bummer no event here
                {% endif %}
			</div><div class="box mr20">
				{% if events.1 %}<a href="/event/{{ events.1.title|slugify }}">{{ events.1 }}</a>
                {% else %}
                bummer no event here
                {% endif %}
			</div><div class="box">
				{% if events.2 %}<a href="/event/{{ events.2.title|slugify }}">{{ events.2 }}</a>
                {% else %}
                bummer no event here
                {% endif %}
			</div>
		</div>

		<div id="doubleboxandaticker">
			<div class="box">
            {{ events.3|default:"crkn" }}<br>
            {{ events.4|default:"crkn" }}<br>
            {{ events.5|default:"crkn" }}<br>
			</div><div class="box mr20">
            {{ events.6|default:"crkn" }}<br>
            {{ events.7|default:"crkn" }}<br>
            {{ events.8|default:"crkn" }}<br>
			</div><div class="box ticker">
		<div id="screen">
		<div id="navigation">
			<ul>
                {% for i in news %}
                    <li><a id="stop{{ forloop.counter }}" href="#">{{ i.name }}</a></li>
                {% endfor %}
			</ul>
		</div>
		<div id="sections">
			<ul>
                {% for i in news %}
                    <li>
                        <h2>{{ i.name }}</h2>
                        <p>{{ i.note }}</p>
                    </li>
                {% endfor %}
			</ul>
		</div>
	</div>
				
			</div>
		</div>

		<div id="threerectangles">
			<div class="box mr20">
				{{ gallery.0 }} {{ gallery.1 }}
			</div><div class="box mr20">
				Videoarhiv
			</div><div class="box">
				<a href="{{ planet.0.get_absolute_url }}">{{ planet.0 }}</a>
				<a href="{{ planet.1.get_absolute_url }}">{{ planet.1 }}</a>
			</div>
		</div>
{% endblock %}
